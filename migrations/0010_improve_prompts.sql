-- ===================================
-- マイグレーション: プロンプトの改善
-- 説明: より具体的で効果的なプロンプトに更新
-- ===================================

-- 既存のarticle_draftプロンプトを更新
UPDATE prompts 
SET body = 'あなたはプロのWebライターです。以下の指示に従って、SEOに最適化された高品質な記事を執筆してください。

【キーワード】
{{keyword}}

【記事構成】
{{outline}}

【執筆要件】
- 文字数: {{max_chars}}文字程度（厳守）
- 文体: {{tone}}な表現で執筆
- フォーマット: Markdown形式で出力
- 見出し: ##（H2）、###（H3）を適切に使用
- SEO対策: キーワードを自然に含める
- 読みやすさ: 段落は3-4文程度、適度に改行
- 具体性: 抽象的な表現を避け、具体例を含める
- 完結性: 読者の疑問に完全に答える内容

【記事の構造】
1. 導入（リード文）: 読者の興味を引き、記事の価値を伝える
2. 本文: 構成に従って詳しく解説
3. まとめ: 重要なポイントを再確認

【注意事項】
- プロンプトや指示文をそのまま出力しない
- 「記事内容:」などの見出しは不要
- すぐに本文から始める
- 自然で読みやすい日本語で執筆

それでは、上記の要件に従って記事を執筆してください。',
    params = '{"max_chars": 3000, "tone": "丁寧で分かりやすい"}'
WHERE type = 'article_draft' 
AND name = 'デフォルト記事執筆プロンプト';

-- Outlineプロンプトも改善
UPDATE prompts 
SET body = 'あなたはSEOコンサルタントです。以下のキーワードに対して、検索意図を満たす記事構成を作成してください。

【キーワード】
{{keyword}}

【要件】
- 想定文字数: {{max_chars}}文字
- トーン: {{tone}}
- SEOを意識した見出し構成
- 読者の検索意図を満たす内容
- 論理的な流れ

【構成のポイント】
1. 読者が知りたいことを網羅
2. 情報の順序は論理的に
3. 各セクションで具体的な内容を示唆
4. 見出しだけで記事の内容が分かる

以下のJSON形式で出力してください（JSON以外は出力しない）:
{
  "title": "記事タイトル（キーワードを含む魅力的なタイトル）",
  "sections": [
    {
      "heading": "見出し1（H2レベル）",
      "points": ["このセクションで触れるポイント1", "ポイント2", "ポイント3"]
    },
    {
      "heading": "見出し2（H2レベル）",
      "points": ["このセクションで触れるポイント1", "ポイント2"]
    }
  ]
}',
    params = '{"max_chars": 3000, "tone": "丁寧で分かりやすい"}'
WHERE type = 'outline' 
AND name = 'デフォルト記事構成プロンプト';
